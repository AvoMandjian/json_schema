language: dart
dart:
  - 1.24.3
  - stable
sudo: required
addons:
  chrome: stable
cache:
  directories:
    - $HOME/.pub-cache
install: true
script:
  - pub get
  - pub run dependency_validator --ignore build_runner,build_test,build_web_compilers,dart_style,coverage
  - pub run dart_dev dart2-only -- format --check
  - pub run dart_dev analyze
  - pub run dart_dev test
  # TODO: re-enable coverage when a Dart 2 solution is available.
  # - pub run dart_dev dart1-only -- coverage --no-html && bash <(curl -s https://codecov.io/bash) -f coverage/coverage.lcov