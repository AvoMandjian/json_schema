language: dart
dart:
  - stable
sudo: required
addons:
  chrome: stable
cache:
  directories:
    - $HOME/.pub-cache
install: true
script:
  - pub get
  - pub run dependency_validator --ignore coverage,test_html_builder
  - pub run dart_dev format --check
  - pub run dart_dev analyze
  - pub run dart_dev test -p vm
  - pub run dart_dev test -p chrome --release
  # TODO: re-enable coverage when a Dart 2 solution is available.
  # - pub run dart_dev dart1-only -- coverage --no-html && bash <(curl -s https://codecov.io/bash) -f coverage/coverage.lcov